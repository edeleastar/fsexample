<!DOCTYPE html>
<html>
<head>
  <style>
    #msg {
      border:1px solid #333;
      background-color:#ccc;
      padding: 2em;
      word-wrap: break-word;
      margin-bottom: 2em;
    }
    #display {
      padding:2em;
      border: 1px solid #999;
    }
  </style>
  <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
</head>

<body>
<script>
  var client_id = 'ZNRM2YYMRQDC4T5JJVTJUPIDKED5YSJX3FWDNBFSRXMBWXT2';
  var client_secret = 'HZPPGFTGDXC3GULSVGAEC3QFNTTJZVVUDWFP0HBY0LXX01CC';
  var base_url = 'https://api.foursquare.com/v2/';
  var endpoint = 'venues/search?';

  var params = 'near=New+York+University';
  var key = '&client_id=' + client_id + '&client_secret=' + client_secret + '&v=' + '20140626';
  var url = base_url+endpoint+params+key;

  //set up map
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 16,
    center: new google.maps.LatLng(40.729,-73.996),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  $.get(url, function (result) {
    //$('#msg pre').text(JSON.stringify(url));
    $('#msg pre').text(JSON.stringify(result));

    var venues = result.response.venues;
    //printVenues(venues);
    for (var i in venues){
      var venue = venues[i];
      // place the a marker on the map
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(venue.location.lat,venue.location.lng),
        map: map
      });
    }});


  function printVenues(venuesArr){
    for (var i in venuesArr){
      var venue = venuesArr[i];
      var str = '<p><strong>' + venue.name + '</strong> ';
      str += venue.location.lat + ',';
      str += venue.location.lng;
      str += '</p>';
      $('#display').append(str);
    }
  }
</script>


  <div id="map" style="width: 500px; height: 400px;"></div>
  <div id="display"></div>
  <div id="msg"><pre></pre></div>
</body>